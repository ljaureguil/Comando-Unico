<html>

<head>
    <meta name="viewport" content="width=device-width">
    <script src='file:///android_asset/app.js'></script>
</head>
<style>
    body {
        color: white;
        background-color: #ffffff;
        font-weight: bold;
        background: rgb(2, 0, 36);
        background: linear-gradient(90deg, rgba(2, 0, 36, 1) 0%, rgba(9, 9, 121, 1) 35%, rgba(0, 212, 255, 1) 100%);
    }
    #dclases {
        // background: url(https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR7yCpP0RT3_hZhroqjyV6I1S_9rhLSB0p9Bg-kNERELOzdIAaemw);
        // background-size: 100% 100%;
    }
    .btns {
        font-weight: bold;
        margin: 5px;
        border-radius: 5px;
        background: #aaffaa;
        font-size: 16px;
        // font-weight: bold;
        width: 30%;
    }
    #ifr {
        background-color: #ffffff;
        // color: white;
        display: none;
    }
</style>


<body onload="app.Start()">
    <div id=ifr></div>
    <div id=t odo>
        <div id=dclases></div>

        <ul id="myList">

        </ul>


    </div>

</body>
<script>
    edc = document.getElementById('dclases');
    eli = document.getElementById('myList');
    eifr = document.getElementById('ifr');

    repertorio = [];
    // repertorio.split(",");
    //alert(repertorio.length);
    var r = [];
    var clases = [];
    // carga de letra     
    loadDoc('https://docs.google.com/document/d/10kKlaNhpy91i_nQci2EbYhx30mVwGMjq4dA9QYiCJPk/edit?usp=sharing', function(rr) {

        //    eifr.innerHTML=rr;

    })




    loadDoc('https://docs.google.com/document/d/1jo-7vKtsLhIWWlNNqy-MgARqIt6Y1bL3m73-4f-9KY0/edit?usp=sharing', function(rr) {

        var a = rr.indexOf("@@@")
        var b = rr.indexOf("###");
        var t = rr.slice(a, b);

        var tt = t.split('*');
        var ttt = [];
        var pr = ""
        for (i = 1; i < tt.length; i++) {
            pr = tt[i].slice(0, tt[i].indexOf("-@"));
            repertorio.push(pr)
            ttt.push(pr);
        }
        //repertorio=ttt;
        //    alert(ttt)
        //    alert(repertorio);
        extract()


    })




    function extract() {
        //     for (i = 0; i < repertorio.length; i++) {
        //       var rp = repertorio[i].split("-")
        //     }
        // repertorio=rep;
        createbtns(getclases(repertorio))
    }

    function getclases(r) {
        var cl = [],
            rp = [],
            clt = "";
        for (i = 0; i < repertorio.length; i++) {
            rp = repertorio[i].split("-");
            clt += rp[2] + " "
        }
        cl = depurar(clt);
        return cl;
    }

    function depurar(ob) {
        var t = ob.split(' '),
            ac1 = [];
        ac1.push(t[0]);
        for (i = 0; i < t.length - 1; i++) {
            if (ac1.indexOf(t[i]) < 0) {
                ac1.push(t[i])
            } else {}
        }
        return ac1;
    }

    function createbtns(li) {
        for (i = 0; i < li.length; i++) {
            var bt = document.createElement('button');
            bt.innerHTML = li[i];
            bt.setAttribute('onclick', "addcl('" + li[i] + "')");
            bt.setAttribute("class", "btns")
            edc.appendChild(bt);
        }
    }

    function addcl(cl) {
        if (cl != undefined) {
            eli.innerHTML = cl + "<br><br>";
            //   alert(cl);
            var a, b = [],
                c = [];
            for (i = 0; i < repertorio.length; i++) {
                a = repertorio[i].split("-");
                c = a[2];
                //      alert(i)
                if (c.indexOf(cl) >= 0) {
                    b.push(repertorio[i])
                    var node = document.createElement("LI");
                    // var textnode = document.createTextNode(a[0]+"    . . . . Tono "+a[1]);
                    var textnode = document.createElement('div')
                    textnode.innerHTML = a[0] + "    . . . . Tono " + a[1];
                    textnode.setAttribute('onclick', 'showletra("' + a[0] + '")');

                    node.appendChild(textnode);
                    eli.appendChild(node);
                }

            }
            //return b;
        }
    }

    function showletra(cancion) {
        alert(cancion);
    }

    function myFunction() {
        var node = document.createElement("LI");
        var textnode = document.createTextNode("Water");
        node.appendChild(textnode);
        document.getElementById("myList").appendChild(node);
    }

    //loadDoc('https://drive.google.com/open?id=1f3sDKsDlnt5yPVbVyndd3dfS1QKSaDXYF7MIYCr54ZY',function(){});


    //https://www.albumcancionyletra.com/mi-golondrina_de_ramon-ayala___113737.aspx
    //https://drive.google.com/open?id=1f3sDKsDlnt5yPVbVyndd3dfS1QKSaDXYF7MIYCr54ZY
    function loadDoc(url, callback) {
        var xhttp = new XMLHttpRequest();
        xhttp.open("GET", url, false);

        xhttp.send();
        var rte = xhttp.responseText;
        callback(rte);
        return rte
    }
</script>


</html>
