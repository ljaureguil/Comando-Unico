<html>

  <body>
    <style>
      body {
        background: linear-gradient(90deg, rgba(2, 0, 36, 1) 0%, rgba(9, 9, 121, 1) 35%, rgba(0, 212, 255, 1) 100%);
        font-size: 30px;
      }
      #todo {
        width: 100%;
        height: 100%;
        overflow: hidden;
      }
      #ifr {
        width: 100%;
        height: 75%;
        background: white;
        border-radius: 15px;
      }
      #ifrs {
        width: 100%; // height:40%;
        font-size: 25px;
        border-radius: 15px;
      }
      .btns {
        color: white;
        font-weight: bold;
        margin: 5px;
        border-radius: 5px;
        background: #000070;
        font-size: 40px; // font-weight: bold;
        width: 30%;
        height: 8%;
      }
      #ed {
        background: rgba(0, 255, 0, .5);
        color: white;
        position: absolute;
        top: 90%;
        bottom: right:5%;
      }
      #edventana {
        font-size: 60px;
        background: rgba(0, 200, 0, .5);
        color: red;
        position: absolute;
        right: 5%;
        bottom: 5%;
        border-radius: 500px;
        border-style: double;
        border-color: blue;
        border-width: 15px;
        padding: 4px;
      }
      #divrep {
        font-size: 14px;
        //position:absolute;
        bottom: 2%;
        width: 100%;
        height: 85%;
      //  background: white;
        overflow-y: auto;
        display: none;
        border-radius: 15px;
        padding: 5%;
      }
    </style>
    <div id="todo">

      <a id="edventana" target="_blank">Edit</a>


      <button class=btns onclick='opendoc( "https://drive.google.com/open?id=1t2D5wteARfH44uZRRxjV2166gUQcP5f4-eWeP70fTxw")'>Por practicar</button>
      <button class=btns onclick='opendoc( "https://drive.google.com/open?id=1jo-7vKtsLhIWWlNNqy-MgARqIt6Y1bL3m73-4f-9KY0")'>Repertorio</button>
      <button class=btns onclick='opendoc( "https://drive.google.com/open?id=1f3sDKsDlnt5yPVbVyndd3dfS1QKSaDXYF7MIYCr54ZY")'>Agenda</button>
      <button class=btns onclick='opendoc( "https://drive.google.com/open?id=1mFV419VmfUa6nL5j-NIHnrUEVdztQ4VETjjx3mQnTrU")'>Contrato</button>
      <button class=btns onclick='opendoc( "letra")'>Letras</button>
      <button class=btns onclick='opendoc( "open rep")'>R Temp</button>

      <div id=ifrs>


        <br>
        <div id="dsr">
          <form method="get" action="http://www.google.com/search">

            <div style="border:2px dotted white;padding:4px;width:100&;">
              <table border="0" align="center" cellpadding="0">
                <tr>
                  <td>
                    <input id="barra" type="text" name="q" style=" font-size:40px;" placeholder="Write a song..." />
                    <input id="srch" type="submit" style="display:none" />
                    <button onclick="getletra()" style=" font-size:40px;border-radius:10px;">Get Letra</button>
                  </td>
                </tr>
              </table>
            </div>

          </form>
        </div>
      </div>
      <iframe id="ifr"></iframe>

      <div id="divrep" readonly></div>
      <div id="bclas"></div>



    </div>

    <script>
      edc = document.getElementById("todo")
      doc = ifr.contentWindow.document;
      repmix = "";
      //size="25" style="color:#808080; 
      //maxlength=" 255 " value="Write the song "" onfocus="if(this.value==this.defaultValue)this.value=''; this.style.color='black';" onblur="if(this.value=='')this.value=this.defaultValue; 
      esrch = document.getElementById('srch');
      ebarra = document.getElementById('barra');
      eedventana = document.getElementById('edventana');
      edivrep = document.getElementById('divrep');
      efr = document.getElementById("ifr")
      loadText('https://raw.githubusercontent.com/ljaureguil/Comando-Unico/master/Repertorio.txt', function(cont) {
     //   alert(cont);
        //   repmix=cont;
        //alert(cont);
        rremix = cont.split("\n")
        remix = [];
        for (i = 0; i < rremix.length; i++) {
          if (rremix[i].indexOf("-") >= 0) remix.push(rremix[i])
        }
        getclases(remix)
       // edivrep.innerHTML = cont
      });
      function opendoc(op) {
        doc.close();
        //alert(op);
        eedventana.href = op; //eedventana.click();
        if (op.indexOf("https") >= 0) {
          ifr.style.display = "block";
          edivrep.style.display = "none";
          ifr.src = op;
        } else {
          if (op === "open rep") {
            edivrep.style.display = "block";
            ifr.style.display = "none";
           
          }
        }
      }
      function getletra() {
        showletra(ebarra.value)
      }
      function showletra(cancion) {
        //  alert(cancion);
        ebarra.value = cancion + " letra";
        //alert(esrch.value)
        esrch.click()
        //eifr.innerHTML=rr;
      }
      function loadText(file, callback) {
        fetch(file)
          .then(response => response.text())
          .then((data) => { //  alert(data);
            callback(data); //
          })
      }
      function createbtns(li) {
        //   alert(li)
        for (i = 0; i < li.length; i++) {
          var bt = document.createElement('button');
          bt.innerHTML = li[i];
          //      alert(li[i])
          bt.setAttribute('onclick', "addcl('" + li[i] + "')");
          bt.setAttribute("class", "btns")
          edivrep.appendChild(bt);
        }
      }
      function getclases(repertorio) {
   //     alert(repertorio)
        var cl = [],
          rp = [],
          clt = "";
        //   alert(repertorio)
        for (i = 0; i < repertorio.length; i++) {
          if (repertorio[i] != "undefined" || repertorio[i] != "" || repertorio[i] != " ") {
            rp = repertorio[i].split("-");
            //alert(rp)
            if (rp != "" || rp != null || rp != undefinef) clt += rp[2] + " "
          }
        }
        //     alert(clt)
        cl = depurar(clt); //alert(cl)
        return cl;
      }
      function depurar(ob) { //alert("obbb       \n"+ob);
        //    alert(JSON.stringify(ob))
        ob = ob.replace(/(\r\n|\n|\r)/gm, "");
        //      alert(JSON.stringify(ob)) 
        var t = ob.split(' '),
          ac1 = [];
        //   alert("obarray   "+t)
        //     alert(JSON.stringify(t))
        //  ac1.push(t[0]);
        //    alert(t.length)
        for (i = 0; i < t.length; i++) { // - 1
          // alert(ac1.indexOf(t[i]))
          if (ac1.indexOf(t[i]) < 0 && t[i] != "") {
            ac1.push(t[i]);
            //   alert(ac1+"\n"+t[i].length+"\n"+t[i][t[i].length-1])
          }
        }
        //     alert(ac1.length)
        //     alert(ac1)
        createbtns(ac1)
        return ac1;
      }
      function addcl(cl) {
        if (cl != undefined) {
          eli.innerHTML = '<font color="#00ff00" fontWeight="bold"><u>' + cl + '</u></font>' + "<br><br>";
          //   alert(cl);
          var a, b = [],
            c = [];
          for (i = 0; i < repertorio.length; i++) {
            a = repertorio[i].split("-");
            c = a[2];
            //       alert(a)
            if (c != undefined) {
              if (c.indexOf(cl) >= 0) { //alert("%%%%%%%%")
                b.push(repertorio[i])
                var node = document.createElement("LI");
                // var textnode = document.createTextNode(a[0]+"    . . . . Tono "+a[1]);
                var textnode = document.createElement('div')
                textnode.innerHTML = a[0] + "    . . . . Tono " + a[1];
                textnode.setAttribute('onclick', 'showletra("' + a[0] + '")');
                var se = document.createElement("br");
                eli.appendChild(se);
                node.appendChild(textnode);
                eli.appendChild(node);
              }
            }
          }
          //return b;
        }
      }
    </script>
  </body>

</html>
